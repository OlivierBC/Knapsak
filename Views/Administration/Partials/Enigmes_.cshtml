@model List<Knapsak_CFTW.Models.Enigme>

<div class="d-flex justify-content-between align-items-center mb-3 header-toolbar">
	<h4 class="mb-0">Gestion des Énigmes</h4>
    <i class="bi bi-plus-square fs-3 text-black"
       title="Créer une nouvelle énigme et ses réponses"
       style="cursor: pointer;"
       onclick="toggleEnigmeCreateMode()">
    </i>
</div>

<!-- Create form (hidden initially) -->
<div id="enigme-create" style="display: none;"></div>

<div>
	@if (!Model.Any())
	{
		<span>Aucun énigme n'a été créé</span>
	}
	else
	{
        @foreach (var enigme in Model)
        {
            <div id="enigme-wrapper-@enigme.IdEnigmes" class="mb-3">
                <!-- Display card -->
                <div id="enigme-display-@enigme.IdEnigmes" class="card p-3">
                    <div class="d-flex justify-content-between">
                        <div class="justify-content-start d-flex align-items-center">
                            <span class="difficulte-admin fw-bold @enigme.GetCssForDifficulty() m-1">
                                @enigme.DifficulteNavigation?.Nom
                            </span>
                            <h5 class="m-1">@enigme.Question</h5>
                        </div>
                        <div class="justify-content-end">
                            <i class="status-enigme-@enigme.IdEnigmes text-black bi @(enigme.EstActif == 1 ? "bi-eye" : "bi-eye-slash") fs-3 m-1"
                               style="cursor: pointer;"
                               onclick="toggleEnigme(@enigme.IdEnigmes)"
                               title="@(enigme.EstActif == 1 ? "Désactiver" : "Activer")">
                            </i>
                            <i class="bi bi-pencil text-black fs-3 m-1"
                               title="Modifier l’énigme et ses réponses"
                               style="cursor: pointer;"
                               onclick="toggleEnigmeEditMode(@enigme.IdEnigmes)">
                            </i>
                        </div>
                    </div>
                </div>

                <!-- Edit form (hidden initially) -->
                <div id="enigme-edit-@enigme.IdEnigmes" style="display: none;"></div>
            </div>
        }

	}
</div>